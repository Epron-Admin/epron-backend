{"version":3,"file":"recyclers.controllers.js","names":["fetch_all_pickup_by_location","req","res","page","parseInt","query","limit","startIndex","endIndex","results","RequestPickup","countDocuments","exec","total_pickups","next","previous","find","sort","skip","err","requestpickup","console","log","json","error","status","message","pagination","requests","fetch_ewaste_by_collection_center","Ewaste","user_id","body","total_ewaste_logged","ewaste","waste_weight","reduce","previousValue","currentValue","weight","total_logged_ewaste","total_weight_logged","fetch_ewaste_by_collection_center_ready_for_pickup","params","id","ready_pickup","fetch_ewaste_by_collection_center_pickedup","pickedup","log_weight_from_collection_center_ewaste","collection_centerid","unit","recycler_id","send","ton_weight","codePin","Math","random","toString","slice","User","findById","_id","doc","code","among","collection_center","includes","RecyclerWaste","unit_weight","ewaste_code","created_at","Date","now","updated_at","save","then","result","fetch_logewaste_weight_by_recycler","populate","total_weight_logged_ton","update_ewaste_to_pickedup_by_recycler","waste","fetch_recyclers_collection_center","role","recyceler"],"sources":["../../../src/controllers/recyclers/recyclers.controllers.js"],"sourcesContent":["import RequestPickup from '../../models/RequestPickup.model.js';\nimport Ewaste from '../../models/Ewaste.model.js';\nimport RecyclerWaste from '../../models/RecyclerWaste.model.js'\nimport User from '../../models/User.model.js'\n// import Center from '../../models/CollectionCenter.model.js'\n// import express from 'express';\n\n\nexport const fetch_all_pickup_by_location = async (req, res) => {\n    const page = parseInt(req.query.page);\n    const limit = parseInt(req.query.limit);\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n\n    const total_pickups = await RequestPickup.countDocuments({}).exec();\n\n    if (endIndex <  await RequestPickup.countDocuments().exec()) {\n        results.next = {\n            page: page + 1,\n            limit: limit\n        }\n    }\n\n    if (startIndex > 0) {\n        results.previous = {\n            page: page - 1,\n            limit: limit\n        }\n    }\n    \n    RequestPickup.find({}).sort('-created_at').limit(limit).skip(startIndex).exec((err, requestpickup) => {\n       \n        if (err) {\n            console.log(err);\n            return res.json({error: true, status: 401, message: \"Failed fetch all request pickups\"})\n        }\n        if (!requestpickup) {\n            console.log(err);\n            return res.json({error: true, status: 404, message: \"pickups not found\"})\n        }\n       \n        return res.json({error: false, status: 201, pagination: results, total_pickups: total_pickups, requests: requestpickup, message: \"All request for pickup successful!\" });\n    });\n}\n\n\nexport const fetch_ewaste_by_collection_center = async (req, res) => {\n    const page = parseInt(req.query.page);\n    const limit = parseInt(req.query.limit);\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n\n    const total_ewaste_logged = await Ewaste.countDocuments({user_id: req.body.user_id}).exec();\n\n    if (endIndex <  await Ewaste.countDocuments().exec()) {\n        results.next = {\n            page: page + 1,\n            limit: limit\n        }\n    }\n\n    if (startIndex > 0) {\n        results.previous = {\n            page: page - 1,\n            limit: limit\n        }\n    }\n    Ewaste.find({user_id: req.body.user_id}).sort('-created_at').limit(limit).skip(startIndex).exec((err, ewaste) => {\n        if (err) {\n            console.log(err);\n            return res.json({error: true, status: 401, message: \"Failed to fetch center ewaste\"})\n        }\n        if (!ewaste) {\n            return res.json({error: true, status: 404, message: \"Cant not find e-waste\"})\n        }\n        const waste_weight = ewaste.reduce(function (previousValue, currentValue) {\n            return previousValue + currentValue.weight;\n          }, 0);\n        return res.json({error: false, status: 201, total_logged_ewaste: total_ewaste_logged, total_weight_logged: waste_weight, pagination: results, ewaste: ewaste, message: \"Fetch all logged ewaste successful!\" });\n    });\n}\n\nexport const fetch_ewaste_by_collection_center_ready_for_pickup = async (req, res) => {\n    const page = parseInt(req.query.page);\n    const limit = parseInt(req.query.limit);\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n\n    const total_ewaste_logged = await Ewaste.countDocuments({user_id: req.params.id, ready_pickup: req.query.ready_pickup}).exec();\n\n    if (endIndex <  await Ewaste.countDocuments({ready_pickup: req.query.ready_pickup}).exec()) {\n        results.next = {\n            page: page + 1,\n            limit: limit\n        }\n    }\n\n    if (startIndex > 0) {\n        results.previous = {\n            page: page - 1,\n            limit: limit\n        }\n    }\n    Ewaste.find({user_id: req.params.id, ready_pickup: req.query.ready_pickup}).sort('-created_at').limit(limit).skip(startIndex).exec((err, ewaste) => {\n        if (err) {\n            console.log(err);\n            return res.json({error: true, status: 401, message: \"Failed to fetch center ewaste\"})\n        }\n        if (!ewaste) {\n            return res.json({error: true, status: 404, message: \"Cant not find e-waste\"})\n        }\n        const waste_weight = ewaste.reduce(function (previousValue, currentValue) {\n            return previousValue + currentValue.weight;\n          }, 0);\n        return res.json({error: false, status: 201, total_logged_ewaste: total_ewaste_logged, total_weight_logged: waste_weight, pagination: results, ewaste: ewaste, message: \"success!\" });\n    });\n}\n\nexport const fetch_ewaste_by_collection_center_pickedup = async (req, res) => {\n    const page = parseInt(req.query.page);\n    const limit = parseInt(req.query.limit);\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n\n    const total_ewaste_logged = await Ewaste.countDocuments({user_id: req.body.user_id, pickedup: req.query.pickedup}).exec();\n\n    if (endIndex <  await Ewaste.countDocuments({pickedup: req.query.pickedup}).exec()) {\n        results.next = {\n            page: page + 1,\n            limit: limit\n        }\n    }\n\n    if (startIndex > 0) {\n        results.previous = {\n            page: page - 1,\n            limit: limit\n        }\n    }\n    Ewaste.find({user_id: req.body.user_id, pickedup: req.query.pickedup}).sort('-created_at').limit(limit).skip(startIndex).exec((err, ewaste) => {\n        if (err) {\n            console.log(err);\n            return res.json({error: true, status: 401, message: \"Failed to fetch center ewaste\"})\n        }\n        if (!ewaste) {\n            return res.json({error: true, status: 404, message: \"Cant not find e-waste\"})\n        }\n        const waste_weight = ewaste.reduce(function (previousValue, currentValue) {\n            return previousValue + currentValue.weight;\n          }, 0);\n        return res.json({error: false, status: 201, total_logged_ewaste: total_ewaste_logged, total_weight_logged: waste_weight, pagination: results, ewaste: ewaste, message: \"success!\" });\n    });\n}\n\n\n\nexport const log_weight_from_collection_center_ewaste = async (req, res) => {\n    if (\n        (!req.body.weight) ||\n        (!req.body.collection_centerid) ||\n        (!req.body.unit) ||\n        (!req.body.recycler_id)\n    )\n    {\n        // console.log(\"All not filled\");\n        return res.status(401).send({error: true, message: \"Weight, unit, recycler_id and collection center ID are required\"});\n    }\n\n\n    let ton_weight;\n    if (req.body.unit === 'kg') {\n        ton_weight = 0.00110231 * req.body.weight;\n    }\n    if (req.body.unit === 'g') {\n        ton_weight = 0.0000011023 * req.body.weight;\n    }\n    const codePin = Math.random().toString(36).slice(2, 7);\n    \n    // collection cennter id is the user ID signed s collection center\n    User.findById({ _id: req.body.recycler_id}).exec((err, doc) => {\n        // console.log(\"User\", doc);\n        if (err) {\n            return res.status(401).send({error: true, code: 401, message: \"An error occcured from recycler\"});\n        }\n        if (!doc) {\n            return res.send({error: true, code: 404, message: 'User does not exist.'});\n        }\n\n        else {\n\n            const among = doc.collection_center.includes(req.body.collection_centerid);\n\n            if (among === true) {\n                let ewaste = new RecyclerWaste({\n                    weight: ton_weight,\n                    unit_weight: req.body.weight, \n                    unit: req.body.unit,\n                    collection_centerid: req.body.collection_centerid,\n                    recycler_id: req.body.recycler_id,\n                    ewaste_code: codePin,\n                    created_at: Date.now(),\n                    updated_at: Date.now()\n            \n                });\n                ewaste.save().then(result => {\n                    res.json({error: false, code: 201, status: 'success', message: 'weight added successfuly', weight: result });\n                    // res.status(200).send({mssage: 'Category created successful'});\n                }).catch(err => {\n                    // console.log(\"Errorrrrrrrrrr\", err);\n                    res.send({ error: true, message: 'failed to add data' });\n                });\n            } else {\n                return res.send({error: true, code: 404, message: 'collection center not assigned to Recycler.'});\n            }\n        }\n    })\n}\n\n\n\n// Dont remove this code, to be used if reyclers are added to collection center\n\n// export const log_weight_from_collection_center_ewaste2 = async (req, res) => {\n//     if (\n//         (!req.body.weight) ||\n//         (!req.body.collection_centerid) ||\n//         (!req.body.unit) ||\n//         (!req.body.recycler_id)\n//     )\n//     {\n//         // console.log(\"All not filled\");\n//         return res.status(401).send({error: true, message: \"Weight, unit, recycler_id and collection center ID are required\"});\n//     }\n\n\n//     let ton_weight;\n//     if (req.body.unit === 'kg') {\n//         ton_weight = 0.00110231 * req.body.weight;\n//     }\n//     if (req.body.unit === 'g') {\n//         ton_weight = 0.0000011023 * req.body.weight;\n//     }\n//     const codePin = Math.random().toString(36).slice(2, 7);\n    \n//     // collection cennter id is the user ID signed s collection center\n//     User.findById({ _id: req.body.collection_centerid}).exec((err, doc) => {\n//         console.log(\"User collection center\", doc);\n//         if (err) {\n//             return res.status(401).send({error: true, code: 401, message: \"An error occcured from collection center\"});\n//         }\n//         if (!doc) {\n//             return res.send({error: true, code: 404, message: 'Collection center does not exist.'});\n//         }\n\n//         else {\n\n//             const among = doc.recyclers.includes(req.body.recycler_id);\n\n//             if (among === true) {\n//                 let ewaste = new RecyclerWaste({\n//                     weight: ton_weight,\n//                     unit_weight: req.body.weight, \n//                     unit: req.body.unit,\n//                     collection_centerid: req.body.collection_centerid,\n//                     recycler_id: req.body.recycler_id,\n//                     ewaste_code: codePin,\n//                     created_at: Date.now(),\n//                     updated_at: Date.now()\n            \n//                 });\n//                 ewaste.save().then(result => {\n//                     res.json({error: false, code: 201, status: 'success', message: 'weight added successfuly', weight: result });\n//                     // res.status(200).send({mssage: 'Category created successful'});\n//                 }).catch(err => {\n//                     // console.log(\"Errorrrrrrrrrr\", err);\n//                     res.send({ error: true, message: 'failed to add data' });\n//                 });\n//             } else {\n//                 return res.send({error: true, code: 404, message: 'Recycler not assigned to collection center.'});\n//             }\n//         }\n//     })\n// }\n\nexport const fetch_logewaste_weight_by_recycler = async (req, res) => {\n    const page = parseInt(req.query.page);\n    const limit = parseInt(req.query.limit);\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const results = {};\n\n    const total_ewaste_logged = await RecyclerWaste.countDocuments({recycler_id: req.params.recycler_id}).exec();\n\n    if (endIndex <  await RecyclerWaste.countDocuments().exec()) {\n        results.next = {\n            page: page + 1,\n            limit: limit\n        }\n    }\n\n    if (startIndex > 0) {\n        results.previous = {\n            page: page - 1,\n            limit: limit\n        }\n    }\n    RecyclerWaste.find({recycler_id: req.params.recycler_id}).populate('collection_centerid').sort('-created_at').limit(limit).skip(startIndex).exec((err, ewaste) => {\n        if (err) {\n            console.log(err);\n            return res.json({error: true, status: 401, message: \"Failed to fetch recycler ewaste weight logged\"})\n        }\n        if (!ewaste) {\n            return res.json({error: true, status: 404, message: \"Cant not find recyceler e-waste weight logged\"})\n        }\n        const waste_weight = ewaste.reduce(function (previousValue, currentValue) {\n            return previousValue + currentValue.weight;\n        }, 0);\n        return res.json({error: false, status: 201, total_logged_ewaste: total_ewaste_logged, total_weight_logged_ton: waste_weight, pagination: results, ewaste: ewaste, message: \"Fetch all logged ewaste successful!\" });\n    });\n}\n\nexport const update_ewaste_to_pickedup_by_recycler = (req, res) => {\n    Ewaste.findById({_id: req.body.id, user_id: req.body.user_id}).exec((err, waste) => {\n        if (err) {\n            return res.json({error: true, status: 401, message: \"Error oocured\"});\n        }\n        if (!waste) {\n            return res.json({error: true, status: 404, message: \"e-waste not found\"});\n        }\n        if (waste.user_id != req.body.user_id) {\n            return res.status(404).send({error: true, message: \"collection center not found\"});\n        } \n        else {\n            if ( waste.pickedup === false) {\n                waste.pickedup = true;\n                waste.save().then((result) => {\n                    return res.status(200).send({error: false, code: 200, message: 'success', message: \"e-waste has been picked up\"});\n                }).catch(err => {\n                    // console.log(err.code);\n                    res.send({ error: true, message: 'failed to update e-waste to picked up' });\n                });\n            } else {\n                return res.json({error: true, status: 401, message: \"e-waste already picked up\"});\n            }\n            \n        }\n    });\n}\n\n\nexport const fetch_recyclers_collection_center = (req, res) => {\n    User.findById({_id: req.params.recycler_id, role: 'collector'}).populate('collection_center').exec((err, recyceler) => {\n        if (err) {\n            return res.json({error: true, status: 401, message: \"Error oocured\"});\n        }\n        if (!recyceler) {\n            return res.json({error: true, status: 404, message: \"recyceler not found\"});\n        }\n        // if (recyceler.user_id != req.body.user_id) {\n        //     return res.status(404).send({error: true, message: \"collection center not found\"});\n        // } \n        else {\n            return res.status(200).send({error: false, code: 200, message: 'success', recyceler: recyceler});\n        }\n    });\n}"],"mappings":"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"}